<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>HabitApp Dashboard</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Protect page 
    <script>
        if (localStorage.getItem("loggedIn") !== "true") {
            window.location.href = "login.html";
        }
    </script>-->

    <header>
        <a class="logo" href="Homepage.html">HabitApp</a>
        <nav class="tab-nav">
            <a href="#" onclick="showSection('dashboard')">Dashboard</a>
            <a href="#" onclick="showSection('calendar')">Calendar</a>
            <a href="#" onclick="showSection('streaks')">Streaks</a>
            <a href="#" onclick="showSection('badges')">Badges</a>
            <a href="#" onclick="showSection('settings')">Settings</a>
            <button onclick="logout()">Logout</button>
        </nav>
    </header>

    <main>
        <section id="dashboard" class="section active">
            <h1>My Habits</h1>
            <table>
                <tr>
                    
                </tr>
            </table>
            <button class="cta-btn" onclick="alert('Add Habit Logic Here')">+ Add Habit</button>
        </section>

        <section id="calendar" class="section">
            <h1>Calendar View</h1>
            <div id ="calendarGrid"></div>
        </section>

        <section id="streaks" class="section">
            <h1>Streaks</h1>
            <p>0 Habits created, 0 streaks ðŸ˜¥</p>
        </section>

        <section id="badges" class="section">
            <h1>Badges</h1>
            <p>[ Badge achievements placeholder ]</p>
        </section>

        <section id="settings" class="section">
            <h1>Settings</h1>
            <p>[ User settings placeholder ]</p>
        </section>
    </main>

    <script>
        function showSection(id) {
            document.querySelectorAll('.section').forEach(sec => sec.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            if (id === "calendar") loadCalendar();
        }

        function logout() {
            localStorage.removeItem("loggedIn");
            window.location.href = "Homepage.html";
        }
        //Example Habits for Calendar grid
        let dummyCheckins = [
            { date: '2025-05-01', habit: 'Drink Water' },
            { date: '2025-05-03', habit: 'Go for a Walk' },
            { date: '2025-05-03', habit: 'Take Out The Trash' },
            { date: '2025-05-07', habit: 'Drink Water' }
        ];

        function loadCalendar() {
            const calendar = document.getElementById('calendarGrid');
            calendar.innerHTML = "";  // clear previous

            const date = new Date();
            const year = date.getFullYear();
            const month = date.getMonth();

            const firstDay = new Date(year, month, 1).getDay();
            const daysInMonth = new Date(year, month + 1, 0).getDate();

            let table = "<table><tr>";
            const weekdays = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"];
            weekdays.forEach(day => table += `<th>${day}</th>`);
            table += "</tr><tr>";

            for (let i = 0; i < firstDay; i++) {
                table += "<td></td>";
            }

            for (let day = 1; day <= daysInMonth; day++) {
                const dateStr = `${year}-${(month + 1).toString().padStart(2,'0')}-${day.toString().padStart(2,'0')}`;
                const habitsForDay = dummyCheckins.filter(h => h.date === dateStr);

                table += `<td style="vertical-align: top;"><strong>${day}</strong>`;
                habitsForDay.forEach(habit => {
                    table += `<div class="habit-pill">${habit.habit}</div>`;
                });
                table += `</td>`;

                if ((day + firstDay) % 7 === 0){
                    table += "</tr><tr>";
                } 
            }
            table += "</tr></table>";
            calendar.innerHTML = table;
        }
    </script>
</body>
</html>
